<Profile xmlns="http://tempuri.org/ProfileSchema.xsd" xmlns:xsi="http://tempuri.org/ProfileSchema.xsd">
    <Name>KeyHuntinn - Sokahr - Oasis</Name>
    <KillMonsters>True</KillMonsters>
    <PickupLoot>True</PickupLoot>
    <GameParams quest="57337" step="26" act="A2" difficulty="Inferno" resumeFromSave="False" isPrivate="True" numGames="-1" />
    <Order>
        <If condition="(not Me.IsInTown) and (not Zeta.ZetaDia.CurrentLevelAreaId==57425)">   
            <UseTownPortal questId="1" />  
            <WaitWhile condition="not Me.IsInTown" />
        </If>

        <!-- GOTO Oasis -->
        <If condition="Me.IsInTown">   
            <UseWaypoint questId="1" x="324.2319" y="291.6554" z="1.64563" actorId="6442" waypointNumber="5" />
            <WaitWhile condition="Me.IsInTown" />
        </If>

        <!-- set the kill/loot radius -->
        <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="50" killRadius="40" />

        <!-- main profile starts here -->
        <While condition="not ActorExistsAt(256000, ZetaDia.Me.Position.X, ZetaDia.Me.Position.Y, ZetaDia.Me.Position.Z, 100)">
            <MoveTo questId="1" x="4225.771" y="4402.414" z="94.58954" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4217.627" y="4474.988" z="97.13789" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4154.598" y="4523.951" z="100.1446" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4108.362" y="4593.289" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4195.444" y="4677.995" z="97.34128" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4108.362" y="4593.289" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4033.307" y="4476.047" z="100.1988" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3973.628" y="4464.061" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3936.378" y="4523.423" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4001.814" y="4624.985" z="99.20027" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3953.482" y="4739.026" z="97.5541" pathPrecision="3" unsafeRandomDistance="1" /> <!-- missing spot -->
            <MoveTo questId="1" x="3839.022" y="4617.792" z="100.0954" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3828.701" y="4605.117" z="100.0882" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3831.642" y="4458.292" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3750.941" y="4414.085" z="100.2" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3683.871" y="4471.221" z="97.44301" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3698.92" y="4447.24" z="98.57202" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3760.634" y="4378.208" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3733.628" y="4317.771" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3629.407" y="4312.877" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3587.438" y="4221.764" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3487.08" y="4143.005" z="100.1" pathPrecision="3" unsafeRandomDistance="1" /> 
            <MoveTo questId="1" x="3545.959" y="4033.181" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3541.897" y="3997.416" z="100.1988" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3598.412" y="4030.274" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3743.585" y="4079.417" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3820.177" y="3984.434" z="100.153" pathPrecision="3" unsafeRandomDistance="1" />
            <LogMessage output="#27" />
            <MoveTo questId="1" x="3838.624" y="4135.998" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <LogMessage output="#28" />
            <MoveTo questId="1" x="3827.48" y="4258.017" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <LogMessage output="#29" />
            <MoveTo questId="1" x="3837.303" y="4329.914" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <LogMessage output="#30" />
            <MoveTo questId="1" x="3676.948" y="4329.587" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3493.475" y="4317.505" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3493.475" y="4317.505" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3470.07" y="4308.3" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3365.261" y="4333.059" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3275.888" y="4208.143" z="98.06458" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3152.014" y="4144.883" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3072.948" y="3978.756" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3064.91" y="4067.507" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3134.363" y="4157.067" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3131.463" y="4293.821" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3200.932" y="4304.981" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3103.383" y="4548.099" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3229.601" y="4674.453" z="97.34127" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3138.284" y="4587.903" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />  
            <MoveTo questId="1" x="3106.134" y="4632.646" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2963.335" y="4657.188" z="99.85443" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2792.088" y="4527.8" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2867.616" y="4428.405" z="100.1484" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2907.051" y="4321.385" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3033.023" y="4249.933" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2940.861" y="4224.197" z="100.1068" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2960.211" y="4166.911" z="97.60065" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2860.446" y="4345.52" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2789.342" y="4398.31" z="100.1002" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2782.527" y="4460.913" z="97.66301" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2720.793" y="4463.372" z="99.89315" pathPrecision="1" unsafeRandomDistance="1"/>
            <LogMessage output="#X" />
            <MoveTo questId="1" x="2778.003" y="4398.69" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <LogMessage output="#Y" />
            <MoveTo questId="1" x="2792.877" y="4212.372" z="100.1467" pathPrecision="3" unsafeRandomDistance="1" />
            <LogMessage output="#Z" />
            
            <If condition="not Me.IsInTown">   
                <UseTownPortal questId="1" />  
                <WaitWhile condition="not Me.IsInTown" />
            </If>

            <LogMessage output="Couldn't find Sokahr!" />
            <WaitTimer questId="1" waitTime="1000" />
            <Continue profile="A3_Start_KeyHuntinn.xml, A1_Start_KeyHuntinn.xml" />
            <LeaveGame />
        </While>

        <!-- Key Warden Sokahr -->
        <If condition="ActorExistsAt(256000, ZetaDia.Me.Position.X, ZetaDia.Me.Position.Y, ZetaDia.Me.Position.Z, 100)">
            <LogMessage output="Sokahr found" />
            <While condition="ActorExistsAt(256000, ZetaDia.Me.Position.X, ZetaDia.Me.Position.Y, ZetaDia.Me.Position.Z, 150)">
                <TrinityMoveToSNO questId="1" snoid="256000" pathPrecision="5" />
            </While>
            <LogMessage output="Sokahr killed" />
            <WaitTimer questId="1" waitTime="1000" />
        </If>

        <!-- Go back to Town to get ready for next profile -->
        <If condition="not Me.IsInTown">   
            <UseTownPortal questId="1" />  
            <WaitWhile condition="not Me.IsInTown" />
        </If>

        <LogMessage output="Act 2 Done" />
        <WaitTimer questId="1" waitTime="1000" />
        <Continue profile="A3_Start_KeyHuntinn.xml, A1_Start_KeyHuntinn.xml" />
        <LeaveGame />
    </Order>
 </Profile>