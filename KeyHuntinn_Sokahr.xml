<Profile xmlns="http://tempuri.org/ProfileSchema.xsd" xmlns:xsi="http://tempuri.org/ProfileSchema.xsd">
    <Name>KeyHuntinn - Sokahr - Oasis</Name>
    <KillMonsters>True</KillMonsters>
    <PickupLoot>True</PickupLoot>
    <GameParams quest="57337" step="26" act="A2" difficulty="Inferno" resumeFromSave="False" isPrivate="True" numGames="-1" />
    <Order>
        <If condition="(not Me.IsInTown) and (not Zeta.ZetaDia.CurrentLevelAreaId==57425)">   
            <UseTownPortal questId="1" />  
            <WaitWhile condition="not Me.IsInTown" />
        </If>

        <!-- GOTO Oasis -->
        <If condition="Me.IsInTown">   
            <UseWaypoint questId="1" x="324.2319" y="291.6554" z="1.64563" actorId="6442" waypointNumber="5" />
            <WaitWhile condition="Me.IsInTown" />
        </If>

        <!-- set the kill/loot radius -->
        <ToggleTargeting questId="1" combat="True" looting="True" lootRadius="50" killRadius="40" />

        <!-- main profile starts here -->
        <While condition="not ActorExistsAt(256000, ZetaDia.Me.Position.X, ZetaDia.Me.Position.Y, ZetaDia.Me.Position.Z, 100)">
            <MoveTo questId="1" x="4219.11" y="4387.877" z="94.4203" pathPrecision="3" />
            <MoveTo questId="1" x="4161.401" y="4504.677" z="100.0547" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4111.484" y="4595.857" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4187.239" y="4672.199" z="97.34127" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4111.484" y="4595.857" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4053.743" y="4632.044" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3986.753" y="4635.704" z="100.1119" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="4075.82" y="4490.384" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3982.22" y="4462.765" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3871.081" y="4608.379" z="100.0591" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3834.424" y="4520.345" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3953.482" y="4739.026" z="97.5541" pathPrecision="3" unsafeRandomDistance="1" /> <!-- missing spot -->
            <MoveTo questId="1" x="3839.374" y="4401.773" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3886.49" y="4220.695" z="100.0927" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3850.326" y="4198.906" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3876.997" y="4055.105" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3812.989" y="3987.49" z="100.0195" pathPrecision="3" unsafeRandomDistance="1" /> <!-- STUCKPOINT -->
            <MoveTo questId="1" x="3745.001" y="4085.805" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3547.484" y="4021.385" z="100.1" pathPrecision="3" unsafeRandomDistance="1" /> <!-- STUCKPOINT -->
            <MoveTo questId="1" x="3599.676" y="4161.26" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3597.224" y="4384.44" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3682.896" y="4464.901" z="97.44301" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3689.919" y="4460.191" z="97.59747" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3658.434" y="4364.588" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3597.224" y="4384.44" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3448.229" y="4414.834" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3389.899" y="4364.895" z="100.0591" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3355.035" y="4231.469" z="100.1004" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3235.141" y="4182.993" z="100.1" pathPrecision="3" unsafeRandomDistance="1" /> 
            <MoveTo questId="1" x="3124.169" y="4123.921" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3081.957" y="4034.642" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2992.25" y="4197.32" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3027.731" y="4243.196" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3202.938" y="4453.584" z="98.65264" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3151.411" y="4529.596" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3169.398" y="4609.085" z="98.00623" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3231.027" y="4674.403" z="97.34128" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3109.926" y="4551.934" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2874.354" y="4573.568" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2714.692" y="4474.128" z="101.6243" pathPrecision="3" unsafeRandomDistance="1"/>
            <MoveTo questId="1" x="2778.003" y="4398.69" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2792.877" y="4212.372" z="100.1467" pathPrecision="3" unsafeRandomDistance="1" />
            <!-- Added Coords for the missing link (keywarden) -->
            <MoveTo questId="1" x="2790.936" y="4319.282" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2843.875" y="4351.588" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2871.557" y="4377.822" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2900.219" y="4272.604" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="2882.751" y="4235.921" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3055.979" y="4326.854" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3118.818" y="4299.036" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3110.32" y="4208.194" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3179.581" y="4282.82" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            <MoveTo questId="1" x="3198.814" y="4321.397" z="100.1" pathPrecision="3" unsafeRandomDistance="1" />
            
            <If condition="not Me.IsInTown">   
                <UseTownPortal questId="1" />  
                <WaitWhile condition="not Me.IsInTown" />
            </If>

            <LogMessage output="Couldn't find Sokahr!" />
            <WaitTimer questId="1" waitTime="1000" />
            <Continue profile="A3_Start_KeyHuntinn.xml, A1_Start_KeyHuntinn.xml" />
            <LeaveGame />
        </While>

        <!-- Key Warden Sokahr -->
        <If condition="ActorExistsAt(256000, ZetaDia.Me.Position.X, ZetaDia.Me.Position.Y, ZetaDia.Me.Position.Z, 100)">
            <LogMessage output="Sokahr found" />
            <While condition="ActorExistsAt(256000, ZetaDia.Me.Position.X, ZetaDia.Me.Position.Y, ZetaDia.Me.Position.Z, 150)">
                <TrinityMoveToSNO questId="1" snoid="256000" pathPrecision="5" />
            </While>
            <LogMessage output="Sokahr killed" />
            <WaitTimer questId="1" waitTime="1000" />
        </If>

        <!-- Go back to Town to get ready for next profile -->
        <If condition="not Me.IsInTown">   
            <UseTownPortal questId="1" />  
            <WaitWhile condition="not Me.IsInTown" />
        </If>

        <LogMessage output="Act 2 Done" />
        <WaitTimer questId="1" waitTime="1000" />
        <Continue profile="A3_Start_KeyHuntinn.xml, A1_Start_KeyHuntinn.xml" />
        <LeaveGame />
    </Order>
 </Profile>